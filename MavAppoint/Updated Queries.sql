drop database MavAppointDB;

create database MavAppointDB;

use MavAppointDB;

CREATE TABLE USER
(    USERID   		 INT   	 NOT NULL,
    EMAIL   		 VARCHAR(255)    NOT NULL UNIQUE,
    USERPASSWORD   	 VARCHAR(32)    NOT NULL,
    ROLE   		 VARCHAR(32),
    VALIDATED   	 TINYINT   	 NOT NULL DEFAULT 0,
PRIMARY KEY(USERID)
) ENGINE=InnoDB;

CREATE TABLE ADVISOR_SETTINGS
(    USERID   	 INT   	 NOT NULL,
    PNAME   	 VARCHAR(32)    NOT NULL,
    EMAIL   	 VARCHAR(255)    NOT NULL,
    NOTIFICATION    VARCHAR(45)    NOT NULL,
PRIMARY KEY(USERID),
FOREIGN KEY(USERID) REFERENCES USER(USERID)
) ENGINE=InnoDB;    

CREATE TABLE APPOINTMENT_TYPES
(    USERID   	 INT   	 NOT NULL,
    APT_TYPE   	 VARCHAR(45)    NOT NULL,
    DURATION    INT   	 NOT NULL,
PRIMARY KEY(USERID,APT_TYPE),
FOREIGN KEY(USERID) REFERENCES USER(USERID)
) ENGINE=InnoDB;

CREATE TABLE ADVISING_SCHEDULE
(    ID   	 INT   	 NOT NULL AUTO_INCREMENT,
    USERID   	 INT   	 NOT NULL,
    ADVISING_DATE    DATE   	 NOT NULL,
    ADVISING_STARTTIME    TIME   	 NOT NULL,
    ADVISING_ENDTIME    TIME   	 NOT NULL,
    STUDENTID    INT,
PRIMARY KEY(ID),
FOREIGN KEY(USERID) REFERENCES USER(USERID)
) ENGINE=InnoDB;

CREATE TABLE APPOINTMENTS
(    ID   	 INT   	 NOT NULL,
    ADVISOR_USERID    INT   	 NOT NULL,
    STUDENT_USERID    INT   	 NOT NULL,
    ADVISING_DATE    DATE   	 NOT NULL,
    ADVISING_STARTTIME    TIME    NOT NULL,
    ADVISING_ENDTIME    TIME    NOT NULL,
    APPOINTMENT_TYPE    VARCHAR(45)    NOT NULL,
	DESCRIPTION VARCHAR(100),
    STUDENTID    INT   	 NOT NULL,
PRIMARY KEY(ID),
FOREIGN KEY(ADVISOR_USERID) REFERENCES USER(USERID),
FOREIGN KEY(STUDENT_USERID) REFERENCES USER(USERID),
FOREIGN KEY(ADVISOR_USERID,APPOINTMENT_TYPE) REFERENCES APPOINTMENT_TYPES(USERID,APT_TYPE)
) ENGINE=InnoDB;

CREATE TABLE DEPARTMENT_SETTINGS
(    ID   	 INT   	 NOT NULL,
    DEP_NAME   	 VARCHAR(45)    NOT NULL,
    ADVISING_START    TIME,
    ADVISING_END    TIME,
PRIMARY KEY(ID)
) ENGINE=InnoDB;

INSERT INTO USER (USERID,email,USERPASSWORD,role,validated) VALUES('1000100000','testadmin@uta.edu','test1234','admin',1);
INSERT INTO USER (USERID,email,USERPASSWORD,role,validated) VALUES('1000100010','testadvisor1@uta.edu','test1234','advisor',1);
INSERT INTO USER (USERID,email,USERPASSWORD,role,validated) VALUES('1000100011','testadvisor2@uta.edu','test1234','advisor',1);
INSERT INTO USER (USERID,email,USERPASSWORD,role,validated) VALUES('1000100012','testadvisor3@uta.edu','test1234','advisor',1);
INSERT INTO USER (USERID,email,USERPASSWORD,role,validated) VALUES('1000100013','testadvisor4@uta.edu','test1234','advisor',1);
INSERT INTO USER (USERID,email,USERPASSWORD,role,validated) VALUES('1000100020','teststudent1@mavs.uta.edu','test1234','student',1);
INSERT INTO USER (USERID,email,USERPASSWORD,role,validated) VALUES('1000100021','teststudent2@mavs.uta.edu','test1234','student',1);
INSERT INTO USER (USERID,email,USERPASSWORD,role,validated) VALUES('1000100022','teststudent3@mavs.uta.edu','test1234','student',1);
INSERT INTO USER (USERID,email,USERPASSWORD,role,validated) VALUES('1000100023','teststudent4@mavs.uta.edu','test1234','student',1);
INSERT INTO USER (USERID,email,USERPASSWORD,role,validated) VALUES('1000100031','testfaculty@uta.edu','test1234','faculty',1);

INSERT INTO APPOINTMENT_TYPES (USERID,APT_TYPE,duration) VALUES(1000100020,'Drop Class',5);
INSERT INTO APPOINTMENT_TYPES (USERID,APT_TYPE,duration) VALUES(1000100021,'Add Class',5);
INSERT INTO APPOINTMENT_TYPES (USERID,APT_TYPE,duration) VALUES(1000100022,'Transfer Student',10);
INSERT INTO ADVISOR_SETTINGS VALUES(1000100010,'Dr. Elmasri','testadvisor1@uta.edu','day');
INSERT INTO ADVISOR_SETTINGS VALUES(1000100011,'Dr. Khalili','testadvisor2@uta.edu','day');
INSERT INTO ADVISOR_SETTINGS VALUES(1000100012,'Eric Mason','testadvisor3@uta.edu','day');